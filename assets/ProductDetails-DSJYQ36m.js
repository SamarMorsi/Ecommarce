import{b as v,r as n,C,j as s,L as p,a as d,V as g}from"./index-N25QuTE4.js";import{S as b}from"./Spinner-CaVVnHhz.js";import{S as P}from"./index-B9D2ovkk.js";import{H as S}from"./Helmet-Bs7vAENK.js";function k(){var x,o;var h={dots:!0,infinite:!0,arrows:!1,speed:500,slidesToShow:1,slidesToScroll:1};let{id:i,category:a}=v(),{addToCart:j}=n.useContext(C),[e,f]=n.useState(null),[r,w]=n.useState(null);function N(){d.get("https://ecommerce.routemisr.com/api/v1/products").then(({data:t})=>{console.log("allprod",t==null?void 0:t.data),console.log("category",a);let l=t==null?void 0:t.data.filter(c=>c.category.name===a);w(l)}).catch(t=>{console.log(t)})}function y(){d.get(`https://ecommerce.routemisr.com/api/v1/products/${i}`).then(({data:t})=>{console.log(t==null?void 0:t.data),f(t==null?void 0:t.data)}).catch(t=>{console.log(t)})}n.useEffect(()=>{y(),N()},[i]);async function m(t){var c,u;let l=await j(t);l.data.status==="success"?g.success((c=l==null?void 0:l.data)==null?void 0:c.message,{position:"top-right",style:{backgroundColor:"#479747",color:"#FFFFFF",padding:"20px",borderRadius:"5px"},icon:"ðŸ›º"}):g.error((u=l==null?void 0:l.data)==null?void 0:u.message)}return s.jsxs(s.Fragment,{children:[s.jsx(S,{children:s.jsx("title",{children:"product details"})}),e?s.jsxs("div",{className:"flex flex-wrap items-center",children:[s.jsx("div",{className:"w-full md:w-1/4",children:s.jsxs(P,{...h,children:[s.jsx("img",{className:"w-full",src:e==null?void 0:e.imageCover,alt:e==null?void 0:e.title}),(x=e==null?void 0:e.images)==null?void 0:x.map(t=>s.jsx("img",{className:"w-full",src:t,alt:e==null?void 0:e.title}))]})}),s.jsx("div",{className:"w-full md:w-3/4",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-3xl font-medium",children:e==null?void 0:e.title}),s.jsx("p",{className:"text-slate-600 my-2",children:e==null?void 0:e.description}),s.jsx("span",{className:"text-green-500 text-xl",children:(o=e==null?void 0:e.category)==null?void 0:o.name}),s.jsxs("div",{className:"flex justify-between my-2",children:[s.jsxs("span",{children:[e==null?void 0:e.price," EGP"]}),s.jsxs("span",{children:[s.jsx("i",{className:"fas fa-star text-yellow-300"}),e==null?void 0:e.ratingsAverage]})]}),s.jsx("button",{onClick:()=>{m(e==null?void 0:e._id)},className:"bg-green-500 cursor-pointer w-full py-2 rounded-md my-2",children:"Add To Cart"})]})})]},e==null?void 0:e._id):s.jsx(b,{}),s.jsxs("div",{className:"my-10",children:[s.jsx("h3",{className:"text-3xl text-green-600 my-3",children:"Related Products"}),s.jsx("div",{className:"flex flex-wrap",children:r==null?void 0:r.map(t=>s.jsx("div",{className:"w-full md:w-1/3 lg:w-1/4 xl:w-1/6",children:s.jsxs("div",{className:"product p-3",children:[s.jsxs(p,{to:`/productdetails/${t.id}/${t.category.name}`,children:[s.jsx("img",{src:t.imageCover,alt:t.title,className:"w-full"}),s.jsx("span",{className:"text-green-700",children:t.category.name}),s.jsx("h3",{className:"text-lg font-medium",children:t.title.split(" ").splice(0,2).join(" ")}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:[t.price," EGP"]}),s.jsxs("span",{children:[s.jsx("i",{className:"fas fa-star text-yellow-300"}),t.ratingsAverage]})]})]}),s.jsx("button",{onClick:()=>{m(t==null?void 0:t._id)},className:"bg-green-500 cursor-pointer w-full py-2 rounded-md my-2",children:"Add To Cart"})]})}))})]})]})}export{k as default};
