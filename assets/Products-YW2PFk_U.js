import{r as o,C as b,j as t,L as y,V as u,a as x}from"./index-BHxjX_Yp.js";import{S as v}from"./Spinner-CUY283TX.js";import{H as C}from"./Helmet-Bv0FG9nM.js";function E(){let{addToCart:h}=o.useContext(b),[n,g]=o.useState(null),[r,d]=o.useState(""),[c,m]=o.useState([]);async function f(e){var i,l;let s=await h(e);s.data.status==="success"?u.success((i=s==null?void 0:s.data)==null?void 0:i.message,{position:"top-right",style:{backgroundColor:"#479747",color:"#FFFFFF",padding:"20px",borderRadius:"5px"},icon:"🛺"}):u.error((l=s==null?void 0:s.data)==null?void 0:l.message,{position:"top-right",style:{backgroundColor:"#479747",color:"#FFFFFF",padding:"20px",borderRadius:"5px"},icon:"❗"})}async function F(e){return x.post("https://ecommerce.routemisr.com/api/v1/wishlist",{productId:e},{headers:{token:localStorage.getItem("usertoken")}})}async function j(e){var s,i,l;try{let a=await F(e);((s=a==null?void 0:a.data)==null?void 0:s.status)==="success"?u.success((i=a==null?void 0:a.data)==null?void 0:i.message,{position:"top-right",style:{backgroundColor:"#479747",color:"#FFFFFF",padding:"20px",borderRadius:"5px"},icon:"❤️"}):u.error((l=a==null?void 0:a.data)==null?void 0:l.message,{position:"top-right",style:{backgroundColor:"#479747",color:"#FFFFFF",padding:"20px",borderRadius:"5px"},icon:"❗"})}catch(a){console.log(a)}}function w(){x.get("https://ecommerce.routemisr.com/api/v1/products").then(({data:e})=>{g(e==null?void 0:e.data),m(e==null?void 0:e.data)}).catch(e=>{console.log(e)})}return o.useEffect(()=>{w()},[]),o.useEffect(()=>{if(r.trim()==="")m(n);else{let e=n==null?void 0:n.filter(s=>s.title.toLowerCase().includes(r.toLowerCase()));m(e)}},[r,n]),t.jsxs(t.Fragment,{children:[t.jsx(C,{children:t.jsx("title",{children:"Products"})}),(c==null?void 0:c.length)>0?t.jsxs("div",{children:[t.jsx("div",{className:"flex justify-center items-center",children:t.jsx("input",{className:"mt-10 text-md py-2 md:w-3xl lg:w-5xl xl:w-6xl px-2 focus:outline-none border border-gray-300 focus:border-4 focus:ring-blue-200 shadow-sm focus:border-blue-300 focus:transition-all placeholder-gray-400  rounded-xl",type:"search",name:"q",placeholder:"search...",value:r,onChange:e=>d(e.target.value)})}),t.jsx("div",{className:"flex gap-y-3 flex-wrap mt-10",children:c==null?void 0:c.map(e=>{var s,i,l;return t.jsx("div",{className:"w-full md:w-1/2 lg:w-1/3 xl:w-1/4",children:t.jsxs("div",{className:"product p-3 relative group rounded overflow-hidden hover:shadow-lg hover:shadow-green-700/70 transition-shadow duration-300",children:[t.jsxs(y,{to:`/productdetails/${e.id}/${(s=e==null?void 0:e.category)==null?void 0:s.name}`,children:[t.jsx("img",{src:e==null?void 0:e.imageCover,alt:e==null?void 0:e.title,className:"w-full"}),t.jsx("span",{className:"text-green-600",children:(i=e==null?void 0:e.category)==null?void 0:i.name}),t.jsx("h3",{className:"mt-4 mb-3 font-medium",children:(l=e==null?void 0:e.title)==null?void 0:l.split(" ").splice(0,2).join(" ")}),t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{children:[e==null?void 0:e.price," EGP"]}),t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-star text-yellow-500"}),e==null?void 0:e.ratingsAverage]})]})]}),t.jsx("i",{tabIndex:"0",onClick:()=>{j(e==null?void 0:e._id)},className:"fa-solid fa-heart text-2xl mt-5 block text-right w-full focus focus:text-red-700"}),t.jsx("button",{onClick:()=>{f(e==null?void 0:e._id)},className:"absolute bottom-[-100px] left-0 w-52 ms-14 cursor-pointer bg-green-500 text-white py-2 rounded-md opacity-0 transition-all duration-500 ease-in-out group-hover:bottom-3 group-hover:opacity-100 group-hover:ring-1 z-10",children:"Add To Cart"})]})},e==null?void 0:e.id)})})]}):t.jsx(v,{})]})}export{E as default};
