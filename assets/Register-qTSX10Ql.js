import{r as l,U as b,u as g,j as e,a as f}from"./index-N25QuTE4.js";import{c as w,a as o,b as j,u as y}from"./index.esm-BnNRfZoi.js";import{H as v}from"./Helmet-Bs7vAENK.js";function B(){let{setuserLogin:i}=l.useContext(b),[n,m]=l.useState(null),[u,a]=l.useState(!1),c=g();function h(x){a(!0),f.post("https://ecommerce.routemisr.com/api/v1/auth/signup",x).then(({data:s})=>{a(!1),s.message==="success"&&(i(s==null?void 0:s.token),c("/"),localStorage.setItem("usertoken",s==null?void 0:s.token))}).catch(s=>{var d,t;a(!1),m((t=(d=s==null?void 0:s.response)==null?void 0:d.data)==null?void 0:t.message)})}let p=w().shape({name:o().required("name is required").min(3,"min 3 letters"),email:o().email("invalid email").required("email is required"),password:o().required("password is required").matches(/^[A-Z][a-z0-9]{4,10}$/,"invalid password"),rePassword:o().required("repassword is requird").oneOf([j("password")],"passwords do not match"),phone:o().required("phone is requird").matches(/^01[01257][0-9]{8}$/,"invalid phone")}),r=y({initialValues:{name:"",email:"",password:"",rePassword:"",phone:""},validationSchema:p,onSubmit:h});return e.jsxs(e.Fragment,{children:[e.jsx(v,{children:e.jsx("title",{children:"Register"})}),e.jsx("div",{className:" flex h-screen py-10 items-center justify-center px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"w-full  space-y-8",children:e.jsxs("div",{className:"bg-white  rounded-md p-6",children:[e.jsx("h2",{className:"my-3 mb-5   text-3xl font-medium tracking-tight ",children:"register now"}),e.jsxs("form",{className:"space-y-6",onSubmit:r.handleSubmit,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block  text-l text-gray-700",children:"Name"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{value:r.values.name,onBlur:r.handleBlur,onChange:r.handleChange,id:"name",name:"name",type:"text",className:"px-2 py-3 mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:border-[#C2DBFE] focus:transition-all  focus:border-4  focus:outline-none focus:ring-green-500 sm:text-sm"})}),r.errors.name&&r.touched.name?e.jsx("h5",{className:"bg-red-100 ps-5 rounded border text-red-700 border-red-200 py-4 mt-3",children:r.errors.name}):null]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-l  text-gray-700",children:"Email"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{value:r.values.email,onBlur:r.handleBlur,onChange:r.handleChange,id:"email",name:"email",type:"email",autoComplete:"email",className:"px-2 py-3 mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:border-[#C2DBFE] focus:transition-all  focus:border-4  focus:outline-none focus:ring-green-500 sm:text-sm"})}),r.errors.email&&r.touched.email?e.jsx("h5",{className:"bg-red-100 ps-5 rounded border text-red-700 border-red-200 py-4 mt-3",children:r.errors.email}):null]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-l  text-gray-700",children:"Password"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{value:r.values.password,onBlur:r.handleBlur,onChange:r.handleChange,id:"password",name:"password",type:"password",autoComplete:"password",className:"px-2 py-3 mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:border-[#C2DBFE] focus:transition-all  focus:border-4  focus:outline-none focus:ring-green-500 sm:text-sm"})}),r.errors.password&&r.touched.password?e.jsx("h5",{className:"bg-red-100 ps-5 rounded border text-red-700 border-red-200 py-4 mt-3",children:r.errors.password}):null]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"rePassword",className:"block text-l  text-gray-700",children:"Re-Password"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{value:r.values.rePassword,onBlur:r.handleBlur,onChange:r.handleChange,id:"rePassword",name:"rePassword",type:"password",autoComplete:"confirm-password",className:"px-2 py-3 mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:border-[#C2DBFE] focus:transition-all  focus:border-4  focus:outline-none focus:ring-green-500 sm:text-sm"})}),r.errors.rePassword&&r.touched.rePassword?e.jsx("h5",{className:"bg-red-100 ps-5 rounded border text-red-700 border-red-200 py-4 mt-3",children:r.errors.rePassword}):null]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-l  text-gray-700",children:"Phone"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{value:r.values.phone,onBlur:r.handleBlur,onChange:r.handleChange,id:"phone",name:"phone",type:"tel",className:"px-2 py-3 mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:border-[#C2DBFE] focus:transition-all  focus:border-4  focus:outline-none focus:ring-green-500 sm:text-sm"})}),r.errors.phone&&r.touched.phone?e.jsx("h5",{className:"bg-red-100 ps-5 rounded border text-red-700 border-red-200 py-4 mt-3",children:r.errors.phone}):null]}),e.jsx("div",{className:"flex  justify-end items-center ",children:e.jsx("button",{type:"submit",className:`text-xl  rounded-md border border-gray-400  outline-none py-2 px-4 cursor-pointer font-medium text-gray-400  ${r.isValid&&r.dirty?"bg-green-500 hover:bg-green-600 text-white":"border border-gray-400  outline-none text-gray-400  "}  `,children:u?e.jsx("i",{className:"fas fa-spinner fa-spin"}):"Register now"})}),n?e.jsx("h5",{className:"bg-red-100 ps-5 rounded border text-red-700 border-red-200 py-4 mt-3 text-center",children:n}):null]})]})})})]})}export{B as default};
