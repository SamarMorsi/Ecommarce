import{r as o,u as g,U as w,j as e,a as f,V as i}from"./index-D5vHPzra.js";import{c as b,a as d,u as j}from"./index.esm-CDI1OtvB.js";function N(){let[v,m]=o.useState(null),[l,a]=o.useState(!1),c=g(),{setuserLogin:u}=o.useContext(w);function p(h){a(!0),f.put("https://ecommerce.routemisr.com/api/v1/auth/resetPassword",h).then(({data:s})=>{a(!1),s!=null&&s.token&&(u(s==null?void 0:s.token),localStorage.setItem("usertoken",s==null?void 0:s.token),c("/"),i.success("Password Changed Successfully",{position:"top-right",style:{backgroundColor:"#479747",color:"#FFFFFF",padding:"20px",borderRadius:"5px"},icon:"👌"}))}).catch(s=>{var t,n;a(!1),console.log(s),m((n=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:n.message),i.error(s.response.data.message,{position:"top-right",style:{backgroundColor:"#479747",color:"#FFFFFF",padding:"20px",borderRadius:"5px"},icon:"❗"})})}let x=b().shape({email:d().email("invalid email").required("email is required"),newPassword:d().required("password is required").matches(/^[A-Z][a-z0-9]{4,10}$/,"invalid password")}),r=j({initialValues:{email:"",newPassword:""},validationSchema:x,onSubmit:p});return o.useEffect(()=>{document.title="Reset password"},[]),e.jsx(e.Fragment,{children:e.jsx("div",{className:" flex h-screen py-10  px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"w-full  space-y-8",children:e.jsxs("div",{className:"bg-white  rounded-md p-6",children:[e.jsx("h2",{className:"my-3  text-3xl font-medium tracking-tight",children:"reset your account password"}),e.jsxs("form",{className:" space-y-6",onSubmit:r.handleSubmit,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-l text-gray-700 ",children:"Email"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{value:r.values.email,onBlur:r.handleBlur,onChange:r.handleChange,id:"email",name:"email",type:"email",autoComplete:"email",className:"px-2 py-3 mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:border-[#C2DBFE] focus:transition-all  focus:border-4 focus:outline-none focus:ring-green-500 sm:text-sm"})}),r.errors.email&&r.touched.email?e.jsx("h5",{className:"bg-red-100 ps-5 rounded border text-red-700 border-red-200 py-4 mt-3",children:r.errors.email}):null]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-l text-gray-700",children:"new password"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{value:r.values.newPassword,onBlur:r.handleBlur,onChange:r.handleChange,id:"newPassword",name:"newPassword",type:"password",autoComplete:"newPassword",className:"px-2 py-3 mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:border-[#C2DBFE] focus:transition-all  focus:border-4  focus:outline-none focus:ring-green-500 sm:text-sm"})}),r.errors.newPassword&&r.touched.newPassword?e.jsx("h5",{className:"bg-red-100 ps-5 rounded border text-red-700 border-red-200 py-4 mt-3",children:r.errors.newPassword}):null]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("button",{disabled:l,type:"submit",className:"flex  justify-center rounded-md text-green-700 hover  hover:bg-green-700 cursor-pointer border border-green-700 outline-none  hover:text-white py-2 px-4 text-xl font-medium  ",children:l?e.jsx("i",{className:"fas fa-spinner fa-spin"}):"reset password"})})]})]})})})})}export{N as default};
