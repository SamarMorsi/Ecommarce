import{r,u as h,U as f,j as e,a as g,f as a}from"./index-BFkvghlA.js";import{c as b,a as C,u as v}from"./index.esm-Bc2mPUR5.js";import{H as j}from"./Helmet-D8xBCrZj.js";function S(){let[y,d]=r.useState(null),[i,o]=r.useState(!1),c=h(),{setuserLogin:u}=r.useContext(f);function m(x){o(!0),g.post("https://ecommerce.routemisr.com/api/v1/auth/verifyResetCode",x).then(({data:s})=>{o(!1),console.log(s),s.status==="Success"&&(u(s==null?void 0:s.token),localStorage.setItem("resetCode",t.values.resetCode),c("/resetpassword"),localStorage.setItem("usertoken",s==null?void 0:s.token),a.success("Code verified",{position:"top-right",style:{backgroundColor:"#479747",color:"#FFFFFF",padding:"20px",borderRadius:"5px"},icon:"üëå"}))}).catch(s=>{var n,l;o(!1),console.log(s),a.error(s.response.data.message,{position:"top-right",style:{backgroundColor:"#479747",color:"#FFFFFF",padding:"20px",borderRadius:"5px"},icon:"‚ùó"}),d((l=(n=s==null?void 0:s.response)==null?void 0:n.data)==null?void 0:l.message)})}let p=b().shape({resetCode:C().required("code is required")}),t=v({initialValues:{resetCode:""},validationSchema:p,onSubmit:m});return e.jsxs(e.Fragment,{children:[e.jsx(j,{children:e.jsx("title",{children:"Reset Code"})}),e.jsx("div",{className:" flex h-screen py-10  px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"w-full  space-y-8",children:e.jsxs("div",{className:"bg-white  rounded-md p-6",children:[e.jsx("h2",{className:"my-3  text-3xl font-medium tracking-tight",children:"reset your account password"}),e.jsxs("form",{className:" space-y-6",onSubmit:t.handleSubmit,children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-1",children:e.jsx("input",{value:t.values.resetCode,onBlur:t.handleBlur,onChange:t.handleChange,id:"resetCode",name:"resetCode",type:"text",autoComplete:"resetCode",placeholder:"Code",className:"px-2 py-4 mt-1 block w-full rounded-md border border-gray-300  focus:border-[#C2DBFE] focus:transition-all  focus:border-4 focus:outline-none focus:ring-green-500 text-l"})}),t.errors.resetCode&&t.touched.resetCode?e.jsx("h5",{className:"bg-red-100 ps-5 rounded border text-red-700 border-red-200 py-4 mt-3",children:t.errors.resetCode}):null]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("button",{disabled:i,type:"submit",className:"flex  justify-center rounded-md text-green-700 hover  hover:bg-green-700 cursor-pointer border border-green-700 outline-none  hover:text-white py-2 px-4 text-xl font-medium  ",children:i?e.jsx("i",{className:"fas fa-spinner fa-spin"}):"verfiy"})})]})]})})})]})}export{S as default};
